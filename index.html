<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Okey 101 Skor Takip Sistemi</title>
<style>
  body {font-family:"Segoe UI",sans-serif;background:#f3f6fb;color:#2c3e50;margin:0;padding:0;}
  h1{text-align:center;padding:20px;background:#4a90e2;color:white;margin:0 0 20px;}
  .container{max-width:1100px;margin:auto;background:white;border-radius:10px;
    box-shadow:0 4px 10px rgba(0,0,0,0.1);padding:20px;}
  label{font-weight:600;}
  input,select{padding:5px 8px;border-radius:6px;border:1px solid #ccc;}
  table{width:100%;border-collapse:collapse;margin-top:20px;}
  th,td{border:1px solid #ddd;text-align:center;vertical-align:middle;padding:8px;}
  th{background:#4a90e2;color:white;}
  .btn{background:#4a90e2;color:white;border:none;padding:10px 20px;border-radius:6px;
    cursor:pointer;margin-top:20px;font-weight:bold;}
  .btn:hover{background:#357ABD;}
  .hidden{display:none;}
  .kategori{border:1px solid #eee;margin:2px;padding:3px;border-radius:5px;background:#f9f9f9;}
  .kategori h4{margin:2px 0;font-size:13px;color:#4a90e2;}
  .kategori label{font-weight:normal;margin-right:5px;}
  .player-cell{font-size:13px;text-align:center;}
  input[type="number"]{width:60px;text-align:center;}
  .locked{opacity:0.6;pointer-events:none;}
</style>
</head>
<body>
<h1>üßÆ Okey 101 Skor Takip Sistemi</h1>

<div class="container" id="ayarEkrani">
  <h3>Oyun Ayarlarƒ±</h3>
  <label>Ka√ß tur oynanacak?</label>
  <input type="number" id="turSayisi" min="1" max="50" value="10"><br><br>
  <label>Oyuncular:</label><br>
  <input id="oy1" value="Oyuncu 1"> 
  <input id="oy2" value="Oyuncu 2"> 
  <input id="oy3" value="Oyuncu 3"> 
  <input id="oy4" value="Oyuncu 4">
  <br><br>
  <button class="btn" onclick="oyunaBasla()">OYUNA BA≈ûLA</button>
</div>

<div class="container hidden" id="oyunEkrani">
  <div id="oyunBilgisi"></div>
  <table id="skorTablo"></table>
  <button class="btn" onclick="yeniOyun()">Yeni Oyun Ba≈ülat</button>
</div>

<script>
function oyunaBasla(){
  const turSayisi=parseInt(document.getElementById("turSayisi").value);
  const oyuncular=[document.getElementById("oy1").value,document.getElementById("oy2").value,
                   document.getElementById("oy3").value,document.getElementById("oy4").value];

  document.getElementById("ayarEkrani").classList.add("hidden");
  document.getElementById("oyunEkrani").classList.remove("hidden");

  let html="<tr><th>El</th>";
  oyuncular.forEach(o=>html+=`<th>${o}</th>`);
  html+="</tr>";

  for(let el=1;el<=turSayisi;el++){
    html+=`<tr><td><b>${el}</b></td>`;
    oyuncular.forEach((o,idx)=>{
      html+=`<td id='cell_${el}_${idx}' class='player-cell'>
        <div class='kategori kat1'>
          <h4>1Ô∏è‚É£ A√ßma Durumu</h4>
          <label><input type='checkbox' class='acmadi'> A√ßamadƒ±</label><br>
          <label>Elinde: <input type='number' class='elinde' min='0' max='200' value=''></label>
        </div>
        <div class='kategori kat2'>
          <h4>2Ô∏è‚É£ Bitme T√ºr√º</h4>
          <label><input type='checkbox' class='bitme'> Bitti</label>
          <label><input type='checkbox' class='bitme'> Okey ile</label>
          <label><input type='checkbox' class='bitme'> √áiftle</label><br>
          <label><input type='checkbox' class='bitme'> Elden Bitti</label>
          <label><input type='checkbox' class='bitme'> Elden Okey ile</label>
          <label><input type='checkbox' class='bitme'> √áiftle Okey ile</label>
        </div>
        <div class='kategori kat3'>
          <h4>3Ô∏è‚É£ Cezalar / Masa A≈üƒ±mƒ±</h4>
          <label><input type='checkbox' class='masaAsti'> Masa A≈ütƒ±</label><br>
          <label>ƒ∞≈ülek Atma: <input type='number' class='ceza islek' min='0' value='0'></label><br>
          <label>Hatalƒ± A√ßma: <input type='number' class='ceza hatali' min='0' value='0'></label><br>
          <label>Okey Kaptƒ±rma: <input type='number' class='ceza kaptir' min='0' value='0'></label>
        </div>
      </td>`;
    });
    html+="</tr>";
  }
  document.getElementById("skorTablo").innerHTML=html;
  aktiflestirOlaylar();
}

function aktiflestirOlaylar(){
  const cells=document.querySelectorAll(".player-cell");

  cells.forEach(cell=>{
    const kat1=cell.querySelector(".kat1");
    const kat2=cell.querySelector(".kat2");
    const kat3=cell.querySelector(".kat3");
    const acmadi=kat1.querySelector(".acmadi");
    const elinde=kat1.querySelector(".elinde");
    const bitmeler=kat2.querySelectorAll(".bitme");

    // 1. Kategori davranƒ±≈üƒ±
    acmadi.addEventListener("change",()=>{
      if(acmadi.checked || elinde.value!==""){
        // sadece se√ßilen g√∂z√ºks√ºn, 2. kategori gizlensin
        [...kat1.children].forEach(c=>{if(!c.contains(acmadi)&&!c.contains(elinde)) c.style.display="none";});
        kat2.style.display="none";
      } else {
        // geri getir
        [...kat1.children].forEach(c=>c.style.display="block");
        kat2.style.display="block";
      }
    });
    elinde.addEventListener("input",()=>{
      if(elinde.value!==""){
        kat1.querySelector(".acmadi").style.display="none";
        kat2.style.display="none";
      } else {
        kat1.querySelector(".acmadi").style.display="inline-block";
        kat2.style.display="block";
      }
    });

    // 2. Kategori davranƒ±≈üƒ±
    bitmeler.forEach(bit=>{
      bit.addEventListener("change",()=>{
        if(bit.checked){
          bitmeler.forEach(b=>{if(b!==bit) b.parentElement.style.display="none";});
          kat1.style.display="none";
        } else {
          bitmeler.forEach(b=>b.parentElement.style.display="inline-block");
          kat1.style.display="block";
        }
      });
    });
  });

  // el kilitleme kontrol√º
  const rows=document.querySelectorAll("#skorTablo tr");
  rows.forEach((row,idx)=>{
    if(idx===0)return;
    const inputs=row.querySelectorAll("input");
    inputs.forEach(inp=>{
      inp.addEventListener("change",()=>kilitKontrol(idx));
    });
  });
}

function kilitKontrol(currentRow){
  const rows=document.querySelectorAll("#skorTablo tr");
  // currentRow satƒ±rƒ±nda i≈ülem olunca, bir √∂nceki satƒ±rƒ± kilitle
  if(currentRow>1){
    const prevRow=rows[currentRow-1];
    if(prevRow && !prevRow.classList.contains("lockedRow")){
      prevRow.classList.add("lockedRow");
      prevRow.querySelectorAll("input,select").forEach(i=>{
        i.disabled=true;
      });
    }
  }
}

function yeniOyun(){
  document.getElementById("oyunEkrani").classList.add("hidden");
  document.getElementById("ayarEkrani").classList.remove("hidden");
}
</script>
</body>
</html>