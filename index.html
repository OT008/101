<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Okey 101 Skor Takip Sistemi</title>
<style>
  body {font-family:"Segoe UI",sans-serif;background:#f3f6fb;color:#2c3e50;margin:0;padding:0;}
  h1{text-align:center;padding:20px;background:#4a90e2;color:white;margin:0 0 20px;}
  .container{max-width:1100px;margin:auto;background:white;border-radius:10px;
    box-shadow:0 4px 10px rgba(0,0,0,0.1);padding:20px;}
  label{display:block;margin-top:10px;font-weight:600;}
  input,select{padding:5px 8px;border-radius:6px;border:1px solid #ccc;width:100%;box-sizing:border-box;}
  table{width:100%;border-collapse:collapse;margin-top:20px;}
  th,td{border:1px solid #ddd;text-align:center;vertical-align:middle;padding:8px;}
  th{background:#4a90e2;color:white;}
  .btn{background:#4a90e2;color:white;border:none;padding:10px 20px;border-radius:6px;
    cursor:pointer;margin-top:20px;font-weight:bold;}
  .btn:hover{background:#357ABD;}
  .hidden{display:none;}
  .section-title{background:#e9f0ff;padding:10px;font-weight:bold;margin-top:20px;border-radius:6px;}
  .player-cell{font-size:13px;text-align:center;}
  .kategori{border:1px solid #eee;margin:2px;padding:4px;border-radius:6px;background:#f9f9f9;}
  .kategori h4{margin:2px 0;font-size:13px;color:#4a90e2;}
  .secenek{display:inline-block;margin:4px 6px;padding:3px 6px;border-radius:5px;cursor:pointer;transition:all .2s;}
  .secenek:hover{background:#e0edff;}
  .secenek.aktif{background:#2ecc71;color:white;font-weight:bold;}
  .locked input, .locked .secenek, .locked button{pointer-events:none;opacity:0.6;}
  input[type="number"]{width:60px;text-align:center;}
  .ceza-satiri{margin:3px 0;}
  .ceza-satiri button{
    width:25px;height:25px;border:none;border-radius:4px;cursor:pointer;
    color:white;font-weight:bold;font-size:14px;
  }
  .ceza-satiri .azalt{background:#e74c3c;}
  .ceza-satiri .azalt:hover{background:#c0392b;}
  .ceza-satiri .artir{background:#2ecc71;}
  .ceza-satiri .artir:hover{background:#27ae60;}
</style>
</head>
<body>
<h1>üßÆ Okey 101 Skor Takip Sistemi</h1>

<!-- ‚öôÔ∏è Gƒ∞Rƒ∞≈û SAYFASI -->
<div class="container" id="ayarEkrani">
  <div class="section-title">Oyun Ayarlarƒ±</div>
  <label>Ka√ß tur oynanacak?</label>
  <input type="number" id="turSayisi" min="1" max="50" value="10">

  <label>Oyuncular:</label>
  <input id="oy1" value="Oyuncu 1">
  <input id="oy2" value="Oyuncu 2">
  <input id="oy3" value="Oyuncu 3">
  <input id="oy4" value="Oyuncu 4">

  <div class="section-title">Puanlama Ayarlarƒ±</div>
  <div style="display:flex;gap:10px;">
    <div style="width:48%;">
      <label>A√ßamama (+)</label><input type="number" id="p_acamama" value="202">
      <label>Bitirme (-)</label><input type="number" id="p_bitirme" value="-101">
      <label>Okey ile Bitirme (-)</label><input type="number" id="p_okeybit" value="-202">
      <label>√áiftle Bitirme (-)</label><input type="number" id="p_ciftbit" value="-202">
    </div>
    <div style="width:48%;">
      <label>Elden Bitirme (-)</label><input type="number" id="p_eldenbit" value="-202">
      <label>Elden Okey ile Bitme (-)</label><input type="number" id="p_eldenokey" value="-404">
      <label>√áiftle Okey ile Bitme (-)</label><input type="number" id="p_ciftokey" value="-404">
      <label>Masa Sayƒ±sƒ±nƒ± A≈üma (-)</label><input type="number" id="p_masaAsma" value="-101">
    </div>
  </div>

  <div class="section-title">Ceza Puanlarƒ±</div>
  <div style="display:flex;gap:10px;">
    <div style="width:48%;">
      <label>ƒ∞≈ülek Atma (+)</label><input type="number" id="c_islek" value="101">
      <label>Okey Kaptƒ±rma (+)</label><input type="number" id="c_okeykaptir" value="101">
    </div>
    <div style="width:48%;">
      <label>Hatalƒ± A√ßma (+)</label><input type="number" id="c_hatali" value="101">
    </div>
  </div>

  <button class="btn" onclick="oyunaBasla()">OYUNA BA≈ûLA</button>
</div>

<!-- üßÆ OYUN TABLOSU -->
<div class="container hidden" id="oyunEkrani">
  <div id="oyunBilgisi"></div>
  <table id="skorTablo"></table>
  <button class="btn" onclick="yeniOyun()">Yeni Oyun Ba≈ülat</button>
</div>

<script>
function oyunaBasla(){
  const turSayisi=parseInt(document.getElementById("turSayisi").value);
  const oyuncular=[oy1.value,oy2.value,oy3.value,oy4.value];
  document.getElementById("ayarEkrani").classList.add("hidden");
  document.getElementById("oyunEkrani").classList.remove("hidden");
  document.getElementById("oyunBilgisi").innerHTML=`<h3>Tur Sayƒ±sƒ±: ${turSayisi}</h3>`;

  let html="<tr><th>El</th>";
  oyuncular.forEach(o=>html+=`<th>${o}</th>`);
  html+="</tr>";

  for(let el=1;el<=turSayisi;el++){
    html+=`<tr><td><b>${el}</b></td>`;
    oyuncular.forEach((o,idx)=>{
      html+=`<td id='cell_${el}_${idx}' class='player-cell'>
        <div class='kategori kat1'>
          <h4>1Ô∏è‚É£ A√ßma Durumu</h4>
          <span class='secenek acmadi'>A√ßamadƒ±</span>
          <span>Elinde: <input type='number' class='elinde' min='0' max='200'></span>
        </div>
        <div class='kategori kat2'>
          <h4>2Ô∏è‚É£ Bitme T√ºr√º</h4>
          <span class='secenek bitme'>Bitti</span>
          <span class='secenek bitme'>Elden Bitti</span>
          <span class='secenek bitme'>√áiftle Bitti</span>
          <span class='secenek okey hidden'>Okey ile</span>
        </div>
        <div class='kategori kat3'>
          <h4>3Ô∏è‚É£ Cezalar / Masa A≈üƒ±mƒ±</h4>
          <span class='secenek masa'>Masa A≈ütƒ±</span>
          <div class='ceza-satiri'>ƒ∞≈ülek Atma:
            <button class='azalt'>-</button>
            <span class='deger islek'>0</span>
            <button class='artir'>+</button>
          </div>
          <div class='ceza-satiri'>Hatalƒ± A√ßma:
            <button class='azalt'>-</button>
            <span class='deger hatali'>0</span>
            <button class='artir'>+</button>
          </div>
          <div class='ceza-satiri'>Okey Kaptƒ±rma:
            <button class='azalt'>-</button>
            <span class='deger kaptir'>0</span>
            <button class='artir'>+</button>
          </div>
        </div>
      </td>`;
    });
    html+="</tr>";
  }
  document.getElementById("skorTablo").innerHTML=html;
  aktiflestirDavranislar();
}

function aktiflestirDavranislar(){
  document.querySelectorAll(".player-cell").forEach(cell=>{
    const kat1=cell.querySelector(".kat1"), kat2=cell.querySelector(".kat2");
    const acmadi=kat1.querySelector(".acmadi"), elinde=kat1.querySelector(".elinde");
    const bitmeler=kat2.querySelectorAll(".bitme");
    const okey=kat2.querySelector(".okey");
    const masaBtn=cell.querySelector(".masa");

    // 1Ô∏è‚É£ A√áMA
    acmadi.addEventListener("click",()=>{
      if(!acmadi.classList.contains("aktif")){
        acmadi.classList.add("aktif");
        elinde.disabled=true;
        kat2.style.display="none";
      }else{
        acmadi.classList.remove("aktif");
        elinde.disabled=false;
        kat2.style.display="block";
      }
    });
    elinde.addEventListener("input",()=>{
      if(elinde.value!==""){
        acmadi.style.display="none";
        kat2.style.display="none";
      }else{
        acmadi.style.display="inline-block";
        kat2.style.display="block";
      }
    });

    // 2Ô∏è‚É£ Bƒ∞TME T√úRLERƒ∞ + OKEY ƒ∞LE
    bitmeler.forEach(bit=>{
      bit.addEventListener("click",()=>{
        const aktifMi=bit.classList.contains("aktif");
        bitmeler.forEach(b=>{b.classList.remove("aktif");b.style.display="inline-block";});
        if(aktifMi){
          kat1.style.display="block";
          okey.classList.add("hidden");
          okey.classList.remove("aktif");
        }else{
          bit.classList.add("aktif");
          kat1.style.display="none";
          bitmeler.forEach(b=>{if(b!==bit)b.style.display="none";});
          okey.classList.remove("hidden");
        }
      });
    });
    okey.addEventListener("click",()=>{
      okey.classList.toggle("aktif");
    });

    // 3Ô∏è‚É£ MASA A≈ûTI
    masaBtn.addEventListener("click",()=>{
      masaBtn.classList.toggle("aktif");
    });

    // 4Ô∏è‚É£ CEZA (+ / -)
    const cezaSatirlari=cell.querySelectorAll(".ceza-satiri");
    cezaSatirlari.forEach(row=>{
      const azalt=row.querySelector(".azalt");
      const artir=row.querySelector(".artir");
      const deger=row.querySelector(".deger");
      azalt.addEventListener("click",()=>{
        let val=parseInt(deger.textContent);
        if(val>0)deger.textContent=val-1;
      });
      artir.addEventListener("click",()=>{
        let val=parseInt(deger.textContent);
        deger.textContent=val+1;
      });
    });
  });

  // üß© AKILLI EL Kƒ∞Lƒ∞TLEME
  const rows=document.querySelectorAll("#skorTablo tr");
  rows.forEach((row,idx)=>{
    if(idx===0)return;
    row.querySelectorAll("input, .secenek, button").forEach(el=>{
      el.addEventListener("input",()=>kilitleOnceki(idx));
      el.addEventListener("click",()=>kilitleOnceki(idx));
    });
  });
}

function kilitleOnceki(satirIndex){
  const rows=document.querySelectorAll("#skorTablo tr");
  if(satirIndex>1){
    const prev=rows[satirIndex-1];
    const current=rows[satirIndex];
    const currentInputs=current.querySelectorAll("input, .secenek.aktif, .deger");
    const currentHasValue=[...currentInputs].some(el=>{
      if(el.classList && el.classList.contains("deger")) return parseInt(el.textContent)>0;
      if(el.tagName==="INPUT"&&el.type==="number") return el.value!=="";
      return el.classList && el.classList.contains("aktif");
    });

    // Eƒüer mevcut elde veri varsa, √∂nceki el kilitlensin
    if(currentHasValue){
      if(!prev.classList.contains("locked")){
        prev.classList.add("locked");
        prev.querySelectorAll("input, .secenek, button").forEach(e=>e.disabled=true);
      }
    } else {
      // Eƒüer mevcut elde hi√ßbir ≈üey yoksa √∂nceki el yeniden a√ßƒ±labilir
      if(prev.classList.contains("locked")){
        prev.classList.remove("locked");
        prev.querySelectorAll("input, .secenek, button").forEach(e=>e.disabled=false);
      }
    }
  }
}

function yeniOyun(){
  document.getElementById("oyunEkrani").classList.add("hidden");
  document.getElementById("ayarEkrani").classList.remove("hidden");
}
</script>
</body>
</html>